题目5  音乐倒数计数器
1. 设计要求
利用AT89C51单片机结合字符型LCD显示器设计一个简易的倒数计数器，可用来煮方便面、煮开水或小睡片刻等。做一小段时间倒计数，当倒计数为0时，则发出一段音乐声响，通知倒计数终了，该做应当做的事。
定时闹钟的基本功能如下。
?字符型LCD（16??2）显示器。
?显示格式为“TIME 分分:秒秒”。
用4个按键操作来设置当前想要倒计数的时间。一旦按下键则开始倒计数，当计数为0时，发出一阵音乐声。
程序执行后工作指示灯LED闪动，表示程序开始执行，按下操作键K1～K4动作如下。
  K1—可调整倒计数的时间1～60分钟。
  K2—设置倒计数的时间为5分钟，显示“0500”。
  K3—设置倒计数的时间为10分钟，显示“1000”。
  K4—设置倒计数的时间为20分钟，显示“2000”。
复位后LCD的画面应能显示倒计时的分钟和秒数，此时按K1键，则在LCD上显示出设置画面。此时，若：
    a. 按操作键K2—增加倒计数的时间1分钟。
    b. 按操作键K3—减少倒计数的时间1分钟。
    c. 按操作键K4—设置完成。 
键盘实现菜单功能的方法，已在题目4详细说明，不再赘述。本题目最大难点是实现音乐的播放。作者利用定时计数器，通过载入不同的计数初值，产生频率不同的方波，输入到蜂鸣器（SOUNER）中，使其发出频率不同的声音。本设计中单片机晶振为1.0592MHz，通过计算各音阶频率，可得1、2、3、4、5、6、7共7个音应赋给定时器的初值为64580、64684、64777、64820、64898、64968、65030。
在此基础上，可将乐曲的简谱转化为单片机可以“识别”的“数组谱”，进一步加入对音长、休止符等的控制量后，可以实现音乐的播放。